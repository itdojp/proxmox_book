# 第8章　バックアップ・リストアとレプリケーション

## 章のゴール

本章では、Proxmox VE のバックアップ機能とレプリケーション機能の基本的な考え方を理解し、
ラボ環境でバックアップジョブの作成・実行・リストアを試せるようになることを目標とします。
本章の画面・操作例は Proxmox VE 9.1（9.x 系）を前提とします。

## バックアップの基本概念

Proxmox VE では、仮想マシンやコンテナの状態をバックアップとして取得し、
別のストレージに保存することで、障害や誤操作からの復旧に備えます。

バックアップ時に意識すべきポイント:

- どのストレージにバックアップを保存するか（ローカルディスク、外部ストレージなど）
- どのくらいの頻度でバックアップを取得するか
- どの単位（VM 単位、サービス単位）でバックアップを考えるか

## バックアップジョブの作成イメージ

Web UI からバックアップジョブを作成し、対象となる VM / コンテナ、保存先ストレージ、スケジュールなどを指定します。
ラボ環境では、まずは手動実行や低頻度のスケジュールで動作を確認するところから始めると良いでしょう。

## リストアの考え方

取得したバックアップから VM をリストアする際には、次の点を意識します。

- 同じホストに戻すか、別ノードに復元するか
- 既存の VM と競合しないように ID やストレージを調整する

ラボ環境では、意図的にテスト用の VM をバックアップ・削除・リストアする一連の流れを試し、
どの程度の時間と手順が必要かを体感しておくことが重要です。

## レプリケーションの概要

クラスタ環境では、特定の VM を定期的に別ノードへレプリケーションすることで、
障害時に素早く起動できる待機系を用意することができます。

レプリケーションのパターンの一例:

- ノード A 上の重要な VM を、ノード B に定期レプリケーションする
- HA 設定と組み合わせて、フェイルオーバ先での起動を想定する

## ラボでの実践パターン

- 単一ノードラボでは、まずはローカルストレージへのバックアップとリストアを通じて基本の流れを確認する
- 3 ノードクラスタラボでは、共有ストレージやレプリケーションを利用した復旧シナリオを検証する

これらの練習を通じて、「バックアップを取っているつもり」ではなく、
実際に復元できるかどうかを確認する習慣を身につけることが、本章の狙いです。
