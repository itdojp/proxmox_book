<svg xmlns="http://www.w3.org/2000/svg" width="980" height="520" viewBox="0 0 980 520">
  <style>
    .title { font: 20px -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Noto Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji'; font-weight: 600; fill: #0f172a; }
    .label { font: 14px -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Noto Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji'; fill: #0f172a; }
    .small { font: 12px -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Noto Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji'; fill: #334155; }
    .box { fill: #f8fafc; stroke: #334155; stroke-width: 1.5; rx: 10; }
    .net { fill: #ecfeff; stroke: #0e7490; stroke-width: 1.5; rx: 10; }
    .accent { fill: #eef2ff; stroke: #3730a3; stroke-width: 1.5; rx: 10; }
    .note { fill: #fff7ed; stroke: #9a3412; stroke-width: 1.5; rx: 10; }
    .line { stroke: #334155; stroke-width: 2; }
    .dash { stroke: #334155; stroke-width: 2; stroke-dasharray: 6 6; }
  </style>

  <rect x="0" y="0" width="980" height="520" fill="#ffffff"/>

  <text class="title" x="20" y="36">3 ノードクラスタと HA（概略）</text>
  <text class="small" x="20" y="58">詳細な画面操作は別パスで追加します。ここでは “成立条件” と “関係性” を押さえます。</text>

  <!-- Operator -->
  <rect class="box" x="20" y="90" width="220" height="56"/>
  <text class="label" x="40" y="122">管理用 PC</text>
  <text class="small" x="40" y="142">Web UI / API</text>

  <!-- Networks -->
  <rect class="net" x="20" y="170" width="220" height="64"/>
  <text class="label" x="40" y="200">管理ネットワーク</text>
  <text class="small" x="40" y="222">例: VLAN 10</text>

  <rect class="net" x="20" y="250" width="220" height="64"/>
  <text class="label" x="40" y="280">VM ネットワーク</text>
  <text class="small" x="40" y="302">例: VLAN 20</text>

  <rect class="net" x="20" y="330" width="220" height="64"/>
  <text class="label" x="40" y="360">ストレージ/バックアップ</text>
  <text class="small" x="40" y="382">例: VLAN 30（任意）</text>

  <!-- Cluster nodes -->
  <rect class="accent" x="300" y="120" width="200" height="120"/>
  <text class="label" x="320" y="150">pve1</text>
  <text class="small" x="320" y="172">ノード</text>
  <text class="small" x="320" y="192">VM が動作</text>

  <rect class="accent" x="540" y="120" width="200" height="120"/>
  <text class="label" x="560" y="150">pve2</text>
  <text class="small" x="560" y="172">ノード</text>
  <text class="small" x="560" y="192">VM が動作</text>

  <rect class="accent" x="780" y="120" width="180" height="120"/>
  <text class="label" x="800" y="150">pve3</text>
  <text class="small" x="800" y="172">ノード</text>
  <text class="small" x="800" y="192">VM が動作</text>

  <!-- Corosync/quorum -->
  <line class="dash" x1="400" y1="240" x2="640" y2="240"/>
  <line class="dash" x1="640" y1="240" x2="870" y2="240"/>
  <line class="dash" x1="400" y1="240" x2="870" y2="240"/>
  <text class="small" x="420" y="260">corosync / クォーラム（クラスタ基盤）</text>

  <!-- Shared storage -->
  <rect class="box" x="300" y="300" width="660" height="80"/>
  <text class="label" x="320" y="330">共有ストレージ（例: Ceph）</text>
  <text class="small" x="320" y="352">ライブマイグレーション/HA と組み合わせやすい（構成により代替もあり）</text>

  <line class="line" x1="400" y1="240" x2="400" y2="300"/>
  <line class="line" x1="640" y1="240" x2="640" y2="300"/>
  <line class="line" x1="870" y1="240" x2="870" y2="300"/>

  <!-- Operator to mgmt network to nodes -->
  <line class="line" x1="130" y1="146" x2="130" y2="170"/>
  <line class="line" x1="240" y1="202" x2="300" y2="160"/>
  <line class="line" x1="240" y1="202" x2="540" y2="160"/>
  <line class="line" x1="240" y1="202" x2="780" y2="160"/>

  <!-- Notes -->
  <rect class="note" x="300" y="400" width="660" height="90"/>
  <text class="label" x="320" y="430">HA の最小イメージ</text>
  <text class="small" x="320" y="452">VM を HA 対象にすると、ノード障害時に別ノードで起動し直す（挙動はストレージ/ネットワーク前提に依存）。</text>
  <text class="small" x="320" y="472">ラボでは “停止 → 自動起動” を安全に試せる範囲で行い、影響範囲を把握します。</text>
</svg>
